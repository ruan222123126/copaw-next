<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NextAI 控制台</title>
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='14' fill='%231f2a37'/%3E%3Cpath d='M18 46V18h8l20 20V18h8v28h-8L26 26v20z' fill='%23f5f6f8'/%3E%3C/svg%3E"
    />
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='14' fill='%231f2a37'/%3E%3Cpath d='M18 46V18h8l20 20V18h8v28h-8L26 26v20z' fill='%23f5f6f8'/%3E%3C/svg%3E"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="ambient ambient-a"></div>
    <div class="ambient ambient-b"></div>
    <div class="app-shell">
      <header class="topbar">
        <div class="title-block">
          <p class="kicker">NextAI</p>
          <h1 data-i18n="app.console">控制台</h1>
        </div>
        <div class="topbar-actions">
          <button
            id="settings-toggle"
            class="settings-toggle"
            type="button"
            aria-controls="settings-popover"
            aria-expanded="false"
            data-i18n-aria-label="control.settings"
          >
            <svg class="settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
              <path d="M10.4 2.7a1 1 0 0 1 1.2-.6l1.2.4a1 1 0 0 0 1 .2l1.1-.7a1 1 0 0 1 1.3.2l1.4 1.5a1 1 0 0 1 .1 1.3l-.8 1a1 1 0 0 0-.2 1l.4 1.3a1 1 0 0 0 .8.7l1.3.2a1 1 0 0 1 .9 1v2a1 1 0 0 1-.9 1l-1.3.2a1 1 0 0 0-.8.7l-.4 1.3a1 1 0 0 0 .2 1l.8 1a1 1 0 0 1-.1 1.3l-1.4 1.5a1 1 0 0 1-1.3.2l-1.1-.7a1 1 0 0 0-1-.2l-1.2.4a1 1 0 0 1-1.2-.6l-.5-1.2a1 1 0 0 0-.9-.6h-1.2a1 1 0 0 0-.9.6l-.5 1.2a1 1 0 0 1-1.2.6l-1.2-.4a1 1 0 0 0-1 .2l-1.1.7a1 1 0 0 1-1.3-.2L2.6 20a1 1 0 0 1-.1-1.3l.8-1a1 1 0 0 0 .2-1l-.4-1.3a1 1 0 0 0-.8-.7l-1.3-.2a1 1 0 0 1-.9-1V11a1 1 0 0 1 .9-1l1.3-.2a1 1 0 0 0 .8-.7l.4-1.3a1 1 0 0 0-.2-1l-.8-1a1 1 0 0 1 .1-1.3L4 2a1 1 0 0 1 1.3-.2l1.1.7a1 1 0 0 0 1 .2l1.2-.4a1 1 0 0 1 1.2.6l.5 1.2a1 1 0 0 0 .9.6h1.2a1 1 0 0 0 .9-.6l.5-1.2Z"></path>
              <circle cx="12" cy="12" r="3.2"></circle>
            </svg>
          </button>
          <div id="settings-popover" class="settings-popover modal-shell is-hidden" aria-hidden="true">
            <div class="modal-backdrop" data-settings-close="true"></div>
            <section class="settings-panel" role="dialog" aria-modal="true" data-i18n-aria-label="control.settingsPanelLabel">
              <div class="settings-panel-head">
                <h2 data-i18n="control.settingsPanelLabel">Console Settings</h2>
                <button
                  id="settings-popover-close"
                  class="secondary-btn"
                  type="button"
                  data-settings-close="true"
                  data-i18n-aria-label="common.close"
                  aria-label="Close"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
                    <path fill="currentColor" d="m12 13.4l-2.9 2.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l2.9-2.9l-2.9-2.875q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l2.9 2.9l2.875-2.9q.275-.275.7-.275t.7.275q.3.3.3.713t-.3.687L13.375 12l2.9 2.9q.275.275.275.7t-.275.7q-.3.3-.712.3t-.688-.3z" />
                  </svg>
                </button>
              </div>
              <div class="settings-layout">
                <aside class="settings-nav" data-i18n-aria-label="control.settingsSectionsLabel">
                  <button
                    type="button"
                    class="settings-nav-item is-active"
                    data-settings-section="models"
                    aria-selected="true"
                    data-i18n="control.settingsSectionModels"
                  >
                    Models
                  </button>
                  <button
                    type="button"
                    class="settings-nav-item"
                    data-settings-section="channels"
                    aria-selected="false"
                    data-i18n="tab.channels"
                  >
                    Channels
                  </button>
                  <button
                    type="button"
                    class="settings-nav-item"
                    data-settings-section="workspace"
                    aria-selected="false"
                    data-i18n="control.settingsSectionWorkspace"
                  >
                    Config
                  </button>
                  <button
                    type="button"
                    class="settings-nav-item"
                    data-settings-section="connection"
                    aria-selected="false"
                    data-i18n="control.settingsSectionConnection"
                  >
                    Connection
                  </button>
                  <button
                    type="button"
                    class="settings-nav-item"
                    data-settings-section="display"
                    aria-selected="false"
                    data-i18n="control.settingsSectionDisplay"
                  >
                    Display
                  </button>
                </aside>
                <div class="settings-sections">
                  <section id="settings-section-models" class="settings-section settings-section-models is-active" data-settings-section-panel="models">
                    <div class="panel-head" hidden>
                      <h3 class="settings-section-title" data-i18n="control.settingsSectionModelsTitle">Model Management</h3>
                      <div class="actions-row panel-actions">
                        <button id="models-add-provider-btn" type="button" data-i18n="models.addProvider">Add Provider</button>
                        <button id="refresh-models" type="button" data-i18n="common.refresh">Refresh</button>
                      </div>
                    </div>
                    <p class="hint settings-section-hint" data-i18n="control.settingsSectionModelsDesc" hidden>
                      Manage providers and maintain model lists.
                    </p>
                    <div class="panel-body models-pages">
                      <section id="models-level1-view" class="models-level models-level-list">
                        <ul id="models-provider-list" class="detail-list models-provider-card-grid"></ul>
                      </section>
                      <section id="models-level2-view" class="models-level models-level-edit" hidden>
                        <div class="models-level-edit-head">
                          <div class="models-level-edit-title-group">
                            <h3 id="models-provider-modal-title" data-i18n="models.editProviderTitle">Edit Provider</h3>
                            <p id="models-edit-provider-meta" class="item-meta"></p>
                          </div>
                        </div>
                        <form id="models-provider-form" class="stack-form panel-body provider-form">
                          <section class="provider-basic-grid">
                            <label class="provider-basic-field">
                              <span data-i18n="models.providerType">Provider type</span>
                              <select id="models-provider-type-select"></select>
                            </label>
                            <label class="provider-basic-field">
                              <span data-i18n="models.providerName">Provider Name</span>
                              <input
                                id="models-provider-name-input"
                                type="text"
                                placeholder="My OpenAI Gateway"
                                data-i18n-placeholder="models.providerNamePlaceholder"
                              />
                            </label>
                            <label class="provider-basic-field provider-basic-toggle">
                              <span data-i18n="models.providerEnabled">Enable Provider</span>
                              <span class="provider-enabled-toggle">
                                <input id="models-provider-enabled-input" class="provider-enabled-toggle-input" type="checkbox" role="switch" checked />
                              </span>
                            </label>
                          </section>

                          <section class="provider-edit-block provider-edit-block-api-key">
                            <div class="provider-edit-block-head">
                              <h4 data-i18n="models.providerAPIKey">API Key (optional)</h4>
                              <div class="provider-edit-block-actions">
                                <button
                                  id="models-provider-api-key-visibility-btn"
                                  class="provider-icon-btn"
                                  type="button"
                                  data-provider-form-action="toggle-api-key-visibility"
                                  data-i18n-aria-label="models.toggleAPIKeyVisibility"
                                  aria-label="Toggle API key visibility"
                                >
                                  <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                                    <path d="M1.5 10s3-5.5 8.5-5.5S18.5 10 18.5 10s-3 5.5-8.5 5.5S1.5 10 1.5 10Z" />
                                    <circle cx="10" cy="10" r="2.6" />
                                  </svg>
                                </button>
                                <button id="models-provider-test-btn" type="button" class="secondary-btn provider-test-btn" data-i18n="models.testProvider">
                                  Test
                                </button>
                              </div>
                            </div>
                            <div class="provider-edit-block-input">
                              <input id="models-provider-api-key-input" type="password" placeholder="sk-***" data-i18n-placeholder="models.providerAPIKeyPlaceholder" />
                            </div>
                            <p class="hint provider-edit-block-hint" data-i18n="models.providerAPIKeyMultipleHint">
                              Multiple keys can be separated by commas.
                            </p>
                          </section>

                          <section class="provider-edit-block provider-edit-block-base-url">
                            <div class="provider-edit-block-head">
                              <h4 data-i18n="models.providerBaseURL">Base URL (optional)</h4>
                              <div class="provider-edit-block-actions">
                                <button
                                  class="provider-icon-btn"
                                  type="button"
                                  data-provider-form-action="focus-base-url"
                                  data-i18n-aria-label="models.focusBaseURL"
                                  aria-label="Focus base URL input"
                                >
                                  <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                                    <path d="M5 10h10" />
                                    <path d="M10 5v10" />
                                    <circle cx="10" cy="10" r="7" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                            <div class="provider-edit-block-input">
                              <input
                                id="models-provider-base-url-input"
                                type="text"
                                placeholder="http://127.0.0.1:19002/v1"
                                data-i18n-placeholder="models.providerBaseURLPlaceholder"
                              />
                            </div>
                            <p class="hint provider-path-preview">
                              <span data-i18n="models.baseURLPreviewLabel">Preview:</span>
                              <code id="models-provider-base-url-preview">/responses</code>
                            </p>
                          </section>

                          <section class="provider-edit-block provider-edit-block-models">
                            <div id="models-provider-models-body" class="provider-models-body">
                              <label id="models-provider-custom-models-field" class="provider-config-card">
                                <span data-i18n="models.customModels">Custom Model Config (optional)</span>
                                <div class="kv-editor">
                                  <div id="models-provider-custom-models-rows" class="custom-model-rows"></div>
                                  <button id="models-provider-custom-models-add-btn" type="button" class="secondary-btn" data-i18n="models.addModel">Add</button>
                                </div>
                              </label>
                              <label class="provider-config-card" hidden>
                                <span data-i18n="models.providerAliases">model_aliases (optional)</span>
                                <div class="kv-editor">
                                  <div id="models-provider-aliases-rows" class="kv-rows" data-kv-kind="aliases"></div>
                                  <button id="models-provider-aliases-add-btn" type="button" class="secondary-btn" data-i18n="models.addAliasRow">Add Alias</button>
                                </div>
                              </label>
                            </div>
                          </section>

                          <section class="provider-edit-block provider-edit-block-advanced">
                            <div class="provider-edit-block-head">
                              <h4 data-i18n="models.advancedSettings">Advanced</h4>
                            </div>
                            <div class="provider-advanced-grid">
                              <label>
                                <span data-i18n="models.providerTimeoutMS">timeout_ms (optional)</span>
                                <input
                                  id="models-provider-timeout-ms-input"
                                  type="number"
                                  min="0"
                                  placeholder="15000"
                                  data-i18n-placeholder="models.providerTimeoutPlaceholder"
                                />
                              </label>
                              <label class="provider-config-card provider-header-card">
                                <span data-i18n="models.providerHeaders">headers (optional)</span>
                                <div class="kv-editor">
                                  <div id="models-provider-headers-rows" class="kv-rows" data-kv-kind="headers"></div>
                                  <button id="models-provider-headers-add-btn" type="button" class="secondary-btn" data-i18n="models.addHeaderRow">Add Header</button>
                                </div>
                              </label>
                            </div>
                          </section>
                          <div class="actions-row provider-form-actions">
                            <button id="models-provider-cancel-btn" type="button" class="secondary-btn" data-i18n="common.cancel">Cancel</button>
                            <button id="models-provider-save-btn" type="submit" data-i18n="models.saveProvider">Save Provider</button>
                          </div>
                        </form>
                      </section>
                    </div>
                  </section>
                  <section id="settings-section-channels" class="settings-section settings-section-channels" data-settings-section-panel="channels" hidden>
                    <div class="panel-head">
                      <h3 class="settings-section-title" data-i18n="control.settingsSectionChannelsTitle">Channel Settings</h3>
                    </div>
                    <div class="panel-body models-pages">
                      <section id="channels-level1-view" class="models-level models-level-list">
                        <ul id="channels-entry-list" class="detail-list models-provider-card-grid"></ul>
                      </section>
                      <section id="channels-level2-view" class="models-level models-level-edit" hidden>
                        <div class="models-level-edit-head">
                          <div class="models-level-edit-title-group">
                            <h3 class="settings-section-title" data-i18n="workspace.qqChannelTitle">QQ Channel Config</h3>
                          </div>
                        </div>
                        <form id="qq-channel-form" class="stack-form">
                          <section class="provider-basic-grid">
                            <label class="provider-basic-field provider-basic-toggle">
                              <span data-i18n="workspace.qqEnabled">Enable QQ channel</span>
                              <span class="provider-enabled-toggle">
                                <input id="qq-channel-enabled" class="provider-enabled-toggle-input" type="checkbox" role="switch" />
                              </span>
                            </label>
                            <label class="provider-basic-field">
                              <span data-i18n="workspace.qqAppID">QQ App ID</span>
                              <input id="qq-channel-app-id" type="text" placeholder="app-xxx" />
                            </label>
                            <label class="provider-basic-field">
                              <span data-i18n="workspace.qqClientSecret">QQ Client Secret</span>
                              <input id="qq-channel-client-secret" type="password" placeholder="secret-xxx" />
                            </label>
                            <label class="provider-basic-field">
                              <span data-i18n="workspace.qqBotPrefix">Bot Prefix</span>
                              <input id="qq-channel-bot-prefix" type="text" placeholder="[BOT] " />
                            </label>
                            <label class="provider-basic-field">
                              <span data-i18n="workspace.qqTargetType">Target Type</span>
                              <select id="qq-channel-target-type">
                                <option value="c2c">c2c</option>
                                <option value="group">group</option>
                                <option value="guild">guild</option>
                              </select>
                            </label>
                            <label class="provider-basic-field">
                              <span data-i18n="workspace.qqAPIEnvironment">API Env</span>
                              <select id="qq-channel-api-env">
                                <option value="production" data-i18n="workspace.qqAPIEnvironmentProduction">Production</option>
                                <option value="sandbox" data-i18n="workspace.qqAPIEnvironmentSandbox">Sandbox</option>
                              </select>
                            </label>
                            <label class="provider-basic-field">
                              <span data-i18n="workspace.qqTimeoutSeconds">Timeout Seconds</span>
                              <input id="qq-channel-timeout-seconds" type="number" min="1" step="1" placeholder="8" />
                            </label>
                          </section>
                          <div class="actions-row">
                            <button id="save-qq-channel" type="submit" data-i18n="workspace.qqSave">Save QQ Config</button>
                          </div>
                        </form>
                      </section>
                    </div>
                  </section>
                  <section id="settings-section-workspace" class="settings-section settings-section-workspace" data-settings-section-panel="workspace" hidden>
                    <div class="panel-head">
                      <h3 class="settings-section-title" data-i18n="workspace.title">Config Files</h3>
                      <div class="actions-row panel-actions">
                        <button id="workspace-import-open-btn" type="button" aria-controls="workspace-import-modal" aria-expanded="false" data-i18n="workspace.importJSON">
                          Import JSON
                        </button>
                        <button id="refresh-workspace" type="button" data-i18n="common.refresh">Refresh</button>
                      </div>
                    </div>
                    <div class="panel-body models-pages workspace-panel-body">
                      <section id="workspace-level1-view" class="models-level models-level-list">
                        <ul id="workspace-entry-list" class="detail-list models-provider-card-grid"></ul>
                      </section>
                      <section id="workspace-level2-config-view" class="models-level models-level-edit" hidden>
                        <div class="models-level-edit-head">
                          <div class="models-level-edit-title-group">
                            <h3 class="settings-section-title" data-i18n="workspace.configCardTitle">Config Files</h3>
                          </div>
                          <button type="button" class="secondary-btn" data-workspace-action="back" data-i18n="workspace.backToCards">Back</button>
                        </div>
                        <article class="subpanel workspace-file-card">
                          <div class="workspace-file-card-head">
                            <h4 class="workspace-file-card-title" data-i18n="workspace.files">Config Files</h4>
                          </div>
                          <ul id="workspace-files-body" class="detail-list models-provider-card-grid workspace-file-card-grid workspace-file-cards"></ul>
                        </article>
                        <form id="workspace-create-file-form" class="stack-form">
                          <label>
                            <span data-i18n="workspace.newPath">New Config File Path</span>
                            <input id="workspace-new-path" type="text" placeholder="notes/demo.md" data-i18n-placeholder="workspace.newPathPlaceholder" />
                          </label>
                          <button id="workspace-create-file-btn" type="submit" data-i18n="workspace.createFile">Create Skill Config File</button>
                        </form>
                      </section>
                      <section id="workspace-level2-prompt-view" class="models-level models-level-edit" hidden>
                        <div class="models-level-edit-head">
                          <div class="models-level-edit-title-group">
                            <h3 class="settings-section-title" data-i18n="workspace.promptCardTitle">Prompt Files</h3>
                          </div>
                          <button type="button" class="secondary-btn" data-workspace-action="back" data-i18n="workspace.backToCards">Back</button>
                        </div>
                        <ul id="workspace-prompts-body" class="detail-list models-provider-card-grid workspace-file-card-grid workspace-file-cards"></ul>
                      </section>
                      <section id="workspace-level2-codex-view" class="models-level models-level-edit" hidden>
                        <div class="models-level-edit-head">
                          <div class="models-level-edit-title-group">
                            <h3 class="settings-section-title" data-i18n="workspace.codexCardTitle">Codex Prompts</h3>
                          </div>
                          <button type="button" class="secondary-btn" data-workspace-action="back" data-i18n="workspace.backToCards">Back</button>
                        </div>
                        <ul id="workspace-codex-tree-body" class="detail-list workspace-codex-tree"></ul>
                      </section>
                    </div>
                  </section>
                  <section class="settings-section settings-section-connection" data-settings-section-panel="connection" hidden>
                    <div class="models-level-edit-head">
                      <div class="models-level-edit-title-group">
                        <h3 class="settings-section-title" data-i18n="control.settingsSectionConnectionTitle">API Connection</h3>
                      </div>
                    </div>
                    <p class="hint settings-section-hint" data-i18n="control.settingsSectionConnectionDesc">
                      Configure gateway endpoint and API key used by chat requests.
                    </p>
                    <div class="stack-form">
                      <section class="provider-basic-grid">
                        <label class="provider-basic-field">
                          <span data-i18n="control.apiBase">API Base</span>
                          <input id="api-base" type="url" placeholder="http://127.0.0.1:8088" />
                        </label>
                        <label class="provider-basic-field">
                          <span data-i18n="control.apiKey">API Key</span>
                          <input id="api-key" type="password" placeholder="change-me" data-i18n-placeholder="control.apiKeyPlaceholder" />
                        </label>
                      </section>
                      <div class="actions-row settings-section-actions">
                        <button id="reload-chats" type="button" data-i18n="control.reloadChats">Reload Chats</button>
                      </div>
                    </div>
                  </section>
                  <section class="settings-section settings-section-display" data-settings-section-panel="display" hidden>
                    <div class="models-level-edit-head">
                      <div class="models-level-edit-title-group">
                        <h3 class="settings-section-title" data-i18n="control.settingsSectionDisplayTitle">Display & Language</h3>
                      </div>
                    </div>
                    <p class="hint settings-section-hint" data-i18n="control.settingsSectionDisplayDesc">
                      Adjust locale and display preferences.
                    </p>
                    <div class="stack-form">
                      <section class="provider-basic-grid">
                        <label class="provider-basic-field">
                          <span data-i18n="control.locale">Language</span>
                          <select id="locale-select">
                            <option value="zh-CN" data-i18n="locale.zhCN">Chinese</option>
                            <option value="en-US" data-i18n="locale.enUS">English</option>
                          </select>
                        </label>
                        <label class="provider-basic-field provider-basic-toggle">
                          <span data-i18n="control.promptContextIntrospect">Prompt Context Introspect</span>
                          <span class="provider-enabled-toggle">
                            <input
                              id="feature-prompt-context-introspect"
                              class="provider-enabled-toggle-input"
                              type="checkbox"
                              role="switch"
                            />
                          </span>
                        </label>
                      </section>
                      <p class="hint settings-section-hint" data-i18n="control.promptContextIntrospectDesc">
                        Enable `/agent/system-layers` based context token estimate and environment context layer.
                      </p>
                    </div>
                  </section>
                </div>
              </div>
            </section>
          </div>
        </div>
      </header>

      <nav class="tab-strip panel" aria-label="控制台标签页" data-i18n-aria-label="tab.ariaLabel">
        <button class="tab-btn active" data-tab="chat" type="button" data-i18n="tab.chat">聊天</button>
        <button class="tab-btn" data-tab="cron" type="button" data-i18n="tab.cron">定时任务</button>
      </nav>

      <div class="panel panel-status">
        <span id="status-line" class="status-line">就绪</span>
      </div>

      <main>
        <section id="panel-chat" class="tab-panel is-active">
          <div class="chat-layout">
            <aside class="sidebar panel">
              <div class="panel-head">
                <h2 data-i18n="chat.sidebarTitle">会话</h2>
                <button id="new-chat" type="button" data-i18n="chat.new">新建会话</button>
              </div>
              <ul id="chat-list" class="chat-list"></ul>
            </aside>

            <section class="chat panel">
              <div class="panel-head chat-head">
                <h2 id="chat-title">鑽夌浼氳瘽</h2>
                <div class="chat-head-actions">
                  <button
                    id="chat-cron-toggle"
                    class="chat-head-icon-btn chat-cron-toggle"
                    type="button"
                    aria-controls="panel-cron"
                    aria-pressed="false"
                    data-i18n-aria-label="cron.title"
                  >
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                      <circle cx="12" cy="12" r="7"></circle>
                      <path d="M12 8v4.5l3 2"></path>
                    </svg>
                  </button>
                  <button
                    id="chat-search-toggle"
                    class="chat-head-icon-btn chat-search-toggle"
                    type="button"
                    aria-controls="search-modal"
                    aria-expanded="false"
                    data-i18n-aria-label="search.title"
                  >
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                      <circle cx="11" cy="11" r="6.5"></circle>
                      <path d="M16 16L21 21"></path>
                    </svg>
                  </button>
                  <label class="chat-prompt-mode-toggle" for="chat-prompt-mode-toggle">
                    <input id="chat-prompt-mode-toggle" class="chat-prompt-mode-toggle-input" type="checkbox" role="switch" />
                    <span data-i18n="chat.codexPromptMode">Codex 提示词</span>
                  </label>
                  <span id="chat-session" class="session-badge"></span>
                </div>
              </div>

              <ul id="message-list" class="messages"></ul>

              <form id="composer" class="composer">
                <div class="composer-shell">
                  <div class="composer-main">
                    <textarea
                      id="message-input"
                      rows="3"
                      placeholder="Ask NextAI anything, @ add files, / open commands"
                      data-i18n-placeholder="chat.inputPlaceholder"
                    ></textarea>
                    <button id="send-btn" class="composer-send-btn" type="submit" data-i18n-aria-label="chat.sendAria">
                      <svg viewBox="0 0 20 20" fill="none" aria-hidden="true">
                        <path d="M10 4.25V15.75" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" />
                        <path d="M5.75 8.5L10 4.25L14.25 8.5" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </button>
                    <div class="composer-toolbar" role="toolbar" aria-label="chat composer tools">
                      <button
                        id="composer-attach-btn"
                        type="button"
                        class="composer-mini-btn composer-mini-btn-icon"
                        data-i18n-aria-label="chat.toolbarAdd"
                      >
                        <svg viewBox="0 0 20 20" fill="none" aria-hidden="true">
                          <path d="M10 5.5V14.5" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" />
                          <path d="M5.5 10H14.5" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" />
                        </svg>
                      </button>
                      <input id="composer-attach-input" type="file" multiple hidden />
                      <select id="composer-provider-select" class="composer-toolbar-select" data-i18n-aria-label="models.provider"></select>
                      <select id="composer-model-select" class="composer-toolbar-select" data-i18n-aria-label="models.modelFromProvider"></select>
                    </div>
                  </div>
                  <div class="composer-meta-row" aria-live="polite">
                    <span id="composer-token-estimate" class="composer-token-estimate">0/128.0k</span>
                  </div>
                  <div class="composer-status-row">
                    <button type="button" class="composer-status-btn">
                      <span class="composer-status-dot" aria-hidden="true"></span>
                      <span data-i18n="chat.statusLocal">本地</span>
                      <span class="composer-caret" aria-hidden="true"></span>
                    </button>
                    <button type="button" class="composer-status-btn composer-status-btn-highlight">
                      <span class="composer-status-alert" aria-hidden="true">!</span>
                      <span data-i18n="chat.statusFullAccess">完全访问权限</span>
                      <span class="composer-caret" aria-hidden="true"></span>
                    </button>
                  </div>
                </div>
              </form>
            </section>
          </div>
        </section>

        <section id="panel-cron" class="tab-panel panel stack-panel">
          <div class="panel-head">
            <h2 data-i18n="cron.title">Cron Jobs</h2>
            <div class="actions-row panel-actions">
              <button id="cron-chat-toggle" class="secondary-btn" type="button" data-i18n="tab.chat">Chat</button>
              <button id="cron-create-open-btn" type="button" aria-controls="cron-create-modal" aria-expanded="false" data-i18n="cron.openCreateModal">
                Create
              </button>
              <button id="refresh-cron" type="button" data-i18n="common.refresh">Refresh</button>
            </div>
          </div>
          <div id="cron-workbench" class="panel-body cron-workbench" data-cron-view="jobs">
            <section id="cron-jobs-subpanel" class="subpanel cron-jobs-subpanel">
              <h3 data-i18n="cron.jobs">Jobs</h3>
              <ul id="cron-jobs-body" class="detail-list cron-job-card-grid"></ul>
            </section>
            <section id="cron-create-modal" class="subpanel cron-editor-panel is-hidden" aria-hidden="true">
              <div class="cron-editor-head">
                <h3 id="cron-create-modal-title" data-i18n="cron.createWorkflowJob">Create Workflow Job</h3>
                <button id="cron-create-modal-close-btn" class="secondary-btn" type="button" data-i18n="common.close">Close</button>
              </div>
              <p id="cron-dispatch-hint" class="hint"></p>
              <form id="cron-create-form" class="stack-form cron-form-grid">
                <label>
                  <span data-i18n="cron.id">ID</span>
                  <input id="cron-id" type="text" placeholder="job-demo" data-i18n-placeholder="cron.idPlaceholder" />
                </label>
                <label>
                  <span data-i18n="cron.name">Name</span>
                  <input id="cron-name" type="text" placeholder="demo task" data-i18n-placeholder="cron.namePlaceholder" />
                </label>
                <label>
                  <span data-i18n="cron.taskType">Task Type</span>
                  <select id="cron-task-type" data-select-search="off">
                    <option value="workflow" data-i18n="cron.taskTypeWorkflow">workflow</option>
                    <option value="text" data-i18n="cron.taskTypeText">text</option>
                  </select>
                </label>
                <label>
                  <span data-i18n="cron.intervalLabel">Schedule (schedule.cron)</span>
                  <input id="cron-interval" type="text" placeholder="60s" value="60s" data-i18n-placeholder="cron.intervalPlaceholder" />
                </label>
                <label>
                  <span data-i18n="cron.dispatchSession">dispatch.target.session_id</span>
                  <input id="cron-session-id" type="text" />
                </label>
                <label>
                  <span data-i18n="cron.maxConcurrency">runtime.max_concurrency</span>
                  <input id="cron-max-concurrency" type="number" min="1" value="1" />
                </label>
                <label>
                  <span data-i18n="cron.timeoutSeconds">runtime.timeout_seconds</span>
                  <input id="cron-timeout-seconds" type="number" min="1" value="30" />
                </label>
                <label>
                  <span data-i18n="cron.misfireGraceSeconds">runtime.misfire_grace_seconds</span>
                  <input id="cron-misfire-grace" type="number" min="0" value="0" />
                </label>
                <section id="cron-text-section" class="full-row">
                  <label class="full-row">
                    <span data-i18n="cron.text">Text</span>
                    <textarea id="cron-text" rows="4" placeholder="Scheduled message text" data-i18n-placeholder="cron.textPlaceholder"></textarea>
                  </label>
                </section>
                <section id="cron-workflow-section" class="full-row stack-block">
                  <div class="actions-row cron-workflow-toolbar">
                    <button id="cron-reset-workflow" type="button" class="secondary-btn" data-i18n="cron.resetWorkflow">Reset Workflow</button>
                    <button
                      id="cron-workflow-fullscreen-btn"
                      type="button"
                      class="secondary-btn"
                      data-i18n="cron.enterFullscreen"
                      data-i18n-aria-label="cron.enterFullscreen"
                    >
                      Fullscreen
                    </button>
                    <span id="cron-workflow-zoom" class="hint mono">100%</span>
                  </div>
                  <div id="cron-workflow-viewport" class="cron-workflow-viewport" aria-label="workflow-canvas">
                    <div id="cron-workflow-canvas" class="cron-workflow-canvas">
                      <svg id="cron-workflow-edges" class="cron-workflow-edges" viewBox="0 0 3200 2000" preserveAspectRatio="xMinYMin meet"></svg>
                      <div id="cron-workflow-nodes" class="cron-workflow-nodes"></div>
                    </div>
                  </div>
                  <div id="cron-workflow-node-editor" class="cron-workflow-node-editor stack-form is-hidden" aria-hidden="true"></div>
                </section>
                <section class="full-row stack-block cron-execution-section">
                  <h4 data-i18n="cron.lastExecution">Last Execution</h4>
                  <ul id="cron-workflow-execution-list" class="detail-list"></ul>
                </section>
                <div class="full-row actions-row">
                  <button id="cron-new-session" type="button" data-i18n="cron.newSession">Generate New Session ID</button>
                  <button id="cron-submit-btn" type="submit" data-i18n="cron.submitCreate">Submit Create (POST /cron/jobs)</button>
                </div>
              </form>
            </section>
          </div>
        </section>
      </main>

      
      <div id="search-modal" class="modal-shell is-hidden" aria-hidden="true">
        <div class="modal-backdrop" data-search-close="true"></div>
        <section class="search-modal-panel" role="dialog" aria-modal="true" data-i18n-aria-label="search.title">
          <div class="search-modal-head">
            <h2 data-i18n="search.title">鎼滅储浼氳瘽</h2>
            <button id="search-modal-close-btn" class="secondary-btn" type="button" data-search-close="true" data-i18n="common.close">
              鍏抽棴
            </button>
          </div>
          <div class="search-modal-content stack-block search-panel-body">
            <section class="subpanel">
              <form class="stack-form search-form" id="search-chat-form">
                <label>
                  <span data-i18n="search.inputLabel">Keyword</span>
                  <input
                    id="search-chat-input"
                    type="search"
                    placeholder="Search chats by keyword"
                    data-i18n-placeholder="search.inputPlaceholder"
                  />
                </label>
              </form>
            </section>
            <section class="subpanel">
              <h3 data-i18n="search.results">Search Results</h3>
              <ul id="search-chat-results" class="search-result-list detail-list"></ul>
            </section>
          </div>
        </section>
      </div>
      <div id="workspace-editor-modal" class="modal-shell is-hidden" aria-hidden="true">
        <div class="modal-backdrop" data-workspace-editor-close="true"></div>
        <section class="workspace-editor-modal-panel" role="dialog" aria-modal="true" aria-labelledby="workspace-editor-modal-title">
          <div class="workspace-editor-modal-head">
            <h2 id="workspace-editor-modal-title" data-i18n="workspace.editor">配置文件编辑</h2>
            <button id="workspace-editor-modal-close-btn" class="secondary-btn" type="button" data-workspace-editor-close="true" data-i18n="common.close">
              关闭
            </button>
          </div>
          <div class="workspace-editor-modal-content">
            <form id="workspace-editor-form" class="stack-form">
              <label>
                <span data-i18n="workspace.selectedPath">当前配置文件路径</span>
                <input id="workspace-file-path" type="text" readonly />
              </label>
              <label>
                <span data-i18n="workspace.fileContent">配置内容</span>
                <textarea id="workspace-file-content" rows="14" placeholder="{}"></textarea>
              </label>
              <div class="actions-row">
                <button id="workspace-save-file-btn" type="submit" data-i18n="workspace.saveFile">保存到 PUT /workspace/files/{file_path}</button>
                <button id="workspace-delete-file-btn" class="secondary-btn" type="button" data-i18n="workspace.deleteFile">删除文件</button>
              </div>
            </form>
          </div>
        </section>
      </div>

      <div id="workspace-import-modal" class="modal-shell is-hidden" aria-hidden="true">
        <div class="modal-backdrop" data-workspace-import-close="true"></div>
        <section class="workspace-import-modal-panel" role="dialog" aria-modal="true" aria-labelledby="workspace-import-modal-title">
          <div class="workspace-import-modal-head">
            <h2 id="workspace-import-modal-title" data-i18n="workspace.importJSON">导入 JSON</h2>
            <button id="workspace-import-modal-close-btn" class="secondary-btn" type="button" data-workspace-import-close="true" data-i18n="common.close">
              关闭
            </button>
          </div>
          <p class="hint" data-i18n="workspace.transferHint">导入配置 `POST /workspace/import`。</p>
          <form id="workspace-import-form" class="stack-form">
            <label>
              <span data-i18n="workspace.jsonPayload">配置 JSON 内容</span>
              <textarea id="workspace-json" rows="12" placeholder='{"docs/readme.md":"hello"}'></textarea>
            </label>
            <button id="workspace-import-btn" type="submit" data-i18n="workspace.importJSON">导入 JSON</button>
          </form>
        </section>
      </div>

    <script type="module" src="./main.js"></script>
  </body>
</html>
